{% extends 'base.html' %}
{% load static %}

{% block title %}
    {% if object %}
        Modifier {{ service.nom }}
    {% else %}
        Créer un service
    {% endif %} - Essentiel CRM Services
{% endblock %}

{% block content %}
    <h2 class="mb-4">
        {% if object %}
            <i class="fas fa-edit me-2"></i> Modifier le service : {{ object.nom }}
        {% else %}
            <i class="fas fa-plus-circle me-2"></i> Créer un service
        {% endif %}
    </h2>

    <div class="card shadow p-4">
        <div class="card-body">
            <form method="post" novalidate>
                {% csrf_token %}

                {% if form.non_field_errors %}
                    <div class="alert alert-danger" role="alert">
                        {% for error in form.non_field_errors %}
                            <p>{{ error }}</p>
                        {% endfor %}
                    </div>
                {% endif %}

                <div class="row">
                    <div class="col-md-6 mb-3">
                        {{ form.nom.label_tag }}
                        {{ form.nom }}
                        {% if form.nom.errors %}
                            <div class="invalid-feedback d-block">{{ form.nom.errors }}</div>
                        {% endif %}
                    </div>
                    <div class="col-md-6 mb-3">
                        {{ form.categorie.label_tag }}
                        {{ form.categorie }}
                        {% if form.categorie.errors %}
                            <div class="invalid-feedback d-block">{{ form.categorie.errors }}</div>
                        {% endif %}
                    </div>
                    <div class="col-md-6 mb-3">
                        {{ form.prix.label_tag }}
                        {{ form.prix }}
                        {% if form.prix.errors %}
                            <div class="invalid-feedback d-block">{{ form.prix.errors }}</div>
                        {% endif %}
                    </div>
                    <div class="col-md-6 mb-3">
                        {{ form.type_tarif.label_tag }}
                        {{ form.type_tarif }}
                        {% if form.type_tarif.errors %}
                            <div class="invalid-feedback d-block">{{ form.type_tarif.errors }}</div>
                        {% endif %}
                    </div>
                    <div class="col-md-12 mb-3">
                        {{ form.description.label_tag }}
                        {{ form.description }}
                        {% if form.description.errors %}
                            <div class="invalid-feedback d-block">{{ form.description.errors }}</div>
                        {% endif %}
                    </div>
                    <div class="col-md-12 mb-3">
                        <div class="form-check">
                            {{ form.actif }}
                            {{ form.actif.label_tag }}
                        </div>
                        {% if form.actif.errors %}
                            <div class="invalid-feedback d-block">{{ form.actif.errors }}</div>
                        {% endif %}
                    </div>
                </div>

                <div class="d-flex justify-content-end gap-2 mt-4">
                    {% if object %}
                        <a href="{% url 'service_detail' object.pk %}" class="btn btn-secondary">
                            <i class="fas fa-times me-2"></i> Annuler
                        </a>
                    {% else %}
                        <a href="{% url 'service_list' %}" class="btn btn-secondary">
                            <i class="fas fa-times me-2"></i> Annuler
                        </a>
                    {% endif %}
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save me-2"></i> {% if object %}Modifier{% else %}Enregistrer{% endif %}
                    </button>
                </div>
            </form>
        </div>
    </div>
{% endblock %}